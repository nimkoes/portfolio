.summarizeSection {
  width: 100%;
  min-width: 0;
}

.summarizeHeaderRow {
  position: -webkit-sticky;
  position: sticky;
  top: var(--timeline-sticky-top, 0);
  z-index: 8;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 0.5rem;
  padding: 0 0 0.35rem calc(var(--graph-main-x, 1rem) + 0.9rem);
  background: linear-gradient(
    to bottom,
    hsla(var(--card-bg), 0.94) 0%,
    hsla(var(--card-bg), 0.82) 70%,
    hsla(var(--card-bg), 0) 100%
  );
  -webkit-backdrop-filter: blur(10px) saturate(150%);
  backdrop-filter: blur(10px) saturate(150%);

  @media all and (min-width: 768px) {
    padding: 0 0 0.4rem calc(var(--graph-main-x, 1.25rem) + 1.1rem);
    margin-bottom: 0.9rem;
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    backdrop-filter: blur(20px) saturate(180%);
  }
}

.summarizeTitle {
  position: static;
  margin: 0;
  font-size: var(--text-xl);
  font-weight: 800;
  line-height: 1.2;
  color: hsla(var(--primary-color));
  text-align: left;

  @media all and (min-width: 768px) {
    font-size: var(--text-3xl);
    line-height: 1.125;
  }
}

.summarizeLegend {
  display: flex;
  flex-wrap: nowrap;
  justify-content: flex-start;
  gap: 0.3rem;
}

.summarizeLegendItem {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 4.8rem;
  padding: 0.14rem 0.34rem;
  border-radius: 9999px;
  border: 1px solid hsl(var(--card-border));
  font-size: 0.63rem;
  font-weight: 700;
  line-height: 1;
  letter-spacing: 0.01em;
}

.summarizeLegendItem[data-entry-type="CAREER"] {
  background-color: hsla(var(--primary-color), 0.2);
  color: hsla(var(--primary-color), 1);
}

.summarizeLegendItem[data-entry-type="ACTIVITIES"] {
  background-color: hsla(32, 80%, 55%, 0.2);
  color: hsl(32 90% 68%);
}

.summarizeLegendItem[data-entry-type="PROJECT"] {
  background-color: hsla(212, 75%, 58%, 0.2);
  color: hsl(212 90% 72%);
}

.summarizeContainer {
  position: relative;
  isolation: isolate;
  --summary-line-width: 2px;
  --summary-node-size: 14px;
  --summary-main-x: var(--graph-main-local-x, -1rem);
  --summary-branch-indent: 26px;
  --summary-lane-gap: 32px;
  --summary-merge-rise: 14px;
  --summary-merge-stem-height: 6px;
  --summary-transition-gap: 12px;
  --summary-date-width: 74px;
  --summary-row-min-height: 38px;
  --summary-label-gap: 18px;

  @media all and (max-width: 767px) {
    --summary-main-x: var(--graph-main-local-x, -0.8rem);
    --summary-line-width: 1.5px;
    --summary-node-size: 12px;
    --summary-branch-indent: 18px;
    --summary-lane-gap: 24px;
    --summary-merge-rise: 11px;
    --summary-date-width: 64px;
    --summary-row-min-height: 33px;
    --summary-label-gap: 14px;
  }
}

.summaryGraph {
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: visible;
}

.summaryMainProbe {
  position: absolute;
  left: var(--summary-main-x);
  top: 0;
  width: 0;
  height: 0;
  pointer-events: none;
}

.summaryGraphStroke {
  stroke: hsl(var(--card-border));
  stroke-width: var(--summary-line-width);
  stroke-linecap: round;
  fill: none;
}

.summaryGraphChildLane {
  stroke: hsla(var(--card-border), 0.92);
  stroke-width: var(--summary-line-width);
  stroke-linecap: round;
  fill: none;
}

.summaryGraphNode {
  fill: hsl(var(--primary-color));
  stroke: hsl(var(--card-bg));
  stroke-width: 2px;
}

.summarizeList {
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  gap: 0.95rem;
  margin: 0;
  padding: 0;
  list-style: none;
}

.summarizeItem {
  position: relative;
  min-height: var(--summary-row-min-height);
  padding-left: calc(
    var(--summary-main-x) +
    var(--summary-branch-indent) +
    (var(--entry-lane-index, 0) * var(--summary-lane-gap)) +
    (var(--summary-date-width) / 2) +
    var(--summary-label-gap)
  );
  display: flex;
  align-items: center;
}

.summarizeDateBadge {
  position: absolute;
  left: calc(
    var(--summary-main-x) +
    var(--summary-branch-indent) +
    (var(--entry-lane-index, 0) * var(--summary-lane-gap)) -
    (var(--summary-date-width) / 2)
  );
  z-index: 4;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--summary-date-width);
  min-width: var(--summary-date-width);
  padding: 0.3rem 0.4rem;
  border-radius: 10px;
  border: 1px solid hsl(var(--card-border));
  background: linear-gradient(180deg, hsla(var(--card-bg), 0.95) 0%, hsla(var(--card-border), 0.32) 100%);
  color: hsla(var(--text-muted), 0.96);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.66rem;
  font-weight: 700;
  letter-spacing: 0.04em;
  line-height: 1;
  white-space: nowrap;
  box-shadow: inset 0 1px 0 hsla(var(--text-primary), 0.08);

  @media all and (max-width: 767px) {
    font-size: 0.56rem;
    padding: 0.22rem 0.3rem;
  }
}

.summarizeDateBadge::before {
  content: "#";
  margin-right: 0.26rem;
  opacity: 0.72;
}

.summarizeLine {
  position: relative;
  z-index: 3;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 0.45rem;
  width: 100%;
  min-width: 0;
  color: hsl(var(--text-primary));
  font-weight: 500;
  font-size: var(--text-sm);
  line-height: 1.4;
  word-break: normal;

  @media all and (max-width: 767px) {
    font-size: calc(var(--text-sm) * 0.9);
  }
}

.summarizeLine[data-entry-type="CAREER"] {
  font-weight: 700;
  color: hsl(var(--text-primary));
  align-items: flex-start;
}

.summarizeLine[data-entry-type="ACTIVITIES"],
.summarizeLine[data-entry-type="PROJECT"] {
  font-weight: 500;
  color: hsla(var(--text-primary), 0.86);
}

.summarizeMessage {
  flex: 1;
  min-width: 0;
}

.summarizeLine[data-entry-type="CAREER"] .summarizeMessage {
  white-space: normal;
}

.summarizeLine[data-entry-type="ACTIVITIES"] .summarizeMessage,
.summarizeLine[data-entry-type="PROJECT"] .summarizeMessage {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.summarizeTypeBadge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 5.8rem;
  padding: 0.14rem 0.46rem;
  margin-right: 0.4rem;
  border-radius: 9999px;
  border: 1px solid hsl(var(--card-border));
  font-size: 0.65rem;
  font-weight: 700;
  line-height: 1;
  letter-spacing: 0.01em;
}

.summarizeTypeBadge[data-entry-type="CAREER"] {
  background-color: hsla(var(--primary-color), 0.2);
  color: hsla(var(--primary-color), 1);
}

.summarizeTypeBadge[data-entry-type="ACTIVITIES"] {
  background-color: hsla(32, 80%, 55%, 0.2);
  color: hsl(32 90% 68%);
  font-weight: 600;
}

.summarizeTypeBadge[data-entry-type="PROJECT"] {
  background-color: hsla(212, 75%, 58%, 0.2);
  color: hsl(212 90% 72%);
  font-weight: 600;
}

@media all and (max-width: 767px) {
  .summarizeHeaderRow {
    align-items: center;
    flex-direction: row;
    gap: 0.3rem;
    min-height: 2.35rem;
    padding-top: 0.2rem;
    padding-bottom: 0.2rem;
    padding-left: calc(var(--graph-main-x, 0.8rem) + 0.45rem);
  }

  .summarizeLegend {
    justify-content: flex-start;
    gap: 0.24rem;
  }

  .summarizeTypeBadge {
    width: 0.98rem;
    min-width: 0.98rem;
    height: 0.98rem;
    padding: 0;
    border-radius: 9999px;
    margin-right: 0.22rem;
    font-size: 0;
    color: transparent;
    border-width: 1.5px;
    box-shadow: 0 0 0 2px hsla(var(--card-bg), 0.88);
  }

  .summarizeTypeBadge[data-entry-type="CAREER"] {
    border-color: hsla(var(--primary-color), 0.6);
    box-shadow: 0 0 0 2px hsla(var(--card-bg), 0.88), 0 0 0.35rem hsla(var(--primary-color), 0.28);
  }

  .summarizeTypeBadge[data-entry-type="ACTIVITIES"] {
    border-color: hsla(32, 90%, 68%, 0.68);
    box-shadow: 0 0 0 2px hsla(var(--card-bg), 0.88), 0 0 0.32rem hsla(32, 90%, 68%, 0.25);
  }

  .summarizeTypeBadge[data-entry-type="PROJECT"] {
    border-color: hsla(212, 90%, 72%, 0.7);
    box-shadow: 0 0 0 2px hsla(var(--card-bg), 0.88), 0 0 0.32rem hsla(212, 90%, 72%, 0.26);
  }
}
